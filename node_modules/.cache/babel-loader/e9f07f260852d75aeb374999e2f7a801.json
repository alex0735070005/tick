{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (service) {\n  if (typeof service.mixin === 'function') {\n    var mixin = {};\n    this.methods.forEach(function (method) {\n      if (typeof service[method] === 'function') {\n        mixin[method] = wrapper;\n      }\n    });\n    service.mixin(mixin);\n  }\n};\n\nfunction isPromise(result) {\n  return typeof result !== 'undefined' && typeof result.then === 'function';\n}\n\nfunction wrapper() {\n  var result = this._super.apply(this, arguments);\n\n  var callback = arguments[arguments.length - 1];\n\n  if (typeof callback === 'function' && isPromise(result)) {\n    result.then(function (data) {\n      return callback(null, data);\n    }, function (error) {\n      return callback(error);\n    });\n  }\n\n  return result;\n}\n\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}